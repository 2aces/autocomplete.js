/*!
 * autocomplete.js 0.6.0
 * https://github.com/algolia/autocomplete.js
 * Copyright 2015 Algolia, Inc. and other contributors; Licensed MIT
 */


(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=require("./src/angular/directive.js");
},{"./src/angular/directive.js":2}],2:[function(require,module,exports){
"use strict";var DOM=require("../common/dom.js");DOM.element=angular.element;var _=require("../common/utils.js");_.isArray=angular.isArray,_.isFunction=angular.isFunction,_.isObject=angular.isObject,_.bind=angular.bind,_.each=angular.forEach,_.map=angular.map,_.mixin=angular.extend;var EventBus=require("../autocomplete/event_bus.js"),Typeahead=require("../autocomplete/typeahead.js");angular.module("algolia.autocomplete",[]).directive("autocomplete",["$parse",function(t){return{restrict:"AC",scope:{options:"&aaOptions",datasets:"&aaDatasets"},link:function(e,a,o){function n(){i&&i.destroy(),i=new Typeahead({input:a,eventBus:s,hint:e.options.hint,minLength:e.options.minLength,autoselect:e.options.autoselect,openOnFocus:e.options.openOnFocus,templates:e.options.templates,debug:e.options.debug,datasets:e.datasets})}o=o,e.options=t(e.options)(e),e.options||(e.options={}),e.datasets=t(e.datasets)(e),e.datasets&&!angular.isArray(e.datasets)&&(e.datasets=[e.datasets]);var s=new EventBus({el:a}),i=null;e.$watch("options",n),angular.isArray(e.datasets)?e.$watchCollection("datasets",n):e.$watch("datasets",n),a.bind("autocomplete:selected",function(t,a,o){e.$emit("autocomplete:selected",a,o)}),a.bind("autocomplete:autocompleted",function(t,a,o){e.$emit("autocomplete:autocompleted",a,o)}),a.bind("autocomplete:opened",function(){e.$emit("autocomplete:opened")}),a.bind("autocomplete:closed",function(){e.$emit("autocomplete:closed")}),a.bind("autocomplete:cursorchanged",function(t,a,o){e.$emit("autocomplete:cursorchanged",t,a,o)})}}}]);
},{"../autocomplete/event_bus.js":6,"../autocomplete/typeahead.js":10,"../common/dom.js":11,"../common/utils.js":12}],3:[function(require,module,exports){
"use strict";var _=require("../common/utils.js"),css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"}};_.isMsie()&&_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),_.isMsie()&&_.isMsie()<=7&&_.mixin(css.input,{marginTop:"-1px"}),module.exports=css;
},{"../common/utils.js":12}],4:[function(require,module,exports){
"use strict";function Dataset(e){e=e||{},e.templates=e.templates||{},e.source||_.error("missing source"),e.name&&!isValidName(e.name)&&_.error("invalid dataset name: "+e.name),this.query=null,this.highlight=!!e.highlight,this.name=e.name||_.getUniqueId(),this.source=e.source,this.displayFn=getDisplayFn(e.display||e.displayKey),this.templates=getTemplates(e.templates,this.displayFn),this.$el=e.$menu&&this.name&&e.$menu.find(".aa-dataset-"+this.name).length>0?DOM.element(e.$menu.find(".aa-dataset-"+this.name)[0]):DOM.element(html.dataset.replace("%CLASS%",this.name)),this.$menu=e.$menu}function getDisplayFn(e){function t(t){return t[e]}return e=e||"value",_.isFunction(e)?e:t}function getTemplates(e,t){function a(e){return"<p>"+t(e)+"</p>"}return{empty:e.empty&&_.templatify(e.empty),header:e.header&&_.templatify(e.header),footer:e.footer&&_.templatify(e.footer),suggestion:e.suggestion||a}}function isValidName(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var datasetKey="aaDataset",valueKey="aaValue",datumKey="aaDatum",_=require("../common/utils.js"),DOM=require("../common/dom.js"),html=require("./html.js"),css=require("./css.js"),EventEmitter=require("./event_emitter.js");Dataset.extractDatasetName=function(e){return DOM.element(e).data(datasetKey)},Dataset.extractValue=function(e){return DOM.element(e).data(valueKey)},Dataset.extractDatum=function(e){return DOM.element(e).data(datumKey)},_.mixin(Dataset.prototype,EventEmitter,{_render:function(e,t){function a(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),r.templates.empty.apply(this,t)}function s(){function e(e){var t;return t=DOM.element(html.suggestion).append(r.templates.suggestion.apply(this,[e].concat(n))).data(datasetKey,r.name).data(valueKey,r.displayFn(e)||null).data(datumKey,e),t.children().each(function(){DOM.element(this).css(css.suggestionChild)}),t}var a,s,n=[].slice.call(arguments,0);return a=DOM.element(html.suggestions).css(css.suggestions),s=_.map(t,e),a.append.apply(a,s),a}function n(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!l}].concat(t),r.templates.header.apply(this,t)}function i(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!l}].concat(t),r.templates.footer.apply(this,t)}if(this.$el){var l,r=this,u=[].slice.call(arguments,2);this.$el.empty(),l=t&&t.length,!l&&this.templates.empty?this.$el.html(a.apply(this,u)).prepend(r.templates.header?n.apply(this,u):null).append(r.templates.footer?i.apply(this,u):null):l&&this.$el.html(s.apply(this,u)).prepend(r.templates.header?n.apply(this,u):null).append(r.templates.footer?i.apply(this,u):null),this.$menu&&this.$menu.addClass("aa-"+(l?"with":"without")+"-"+this.name).removeClass("aa-"+(l?"without":"with")+"-"+this.name),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){if(!a.canceled&&e===a.query){var s=[].slice.call(arguments,1);s=[e,t].concat(s),a._render.apply(a,s)}}var a=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),module.exports=Dataset;
},{"../common/dom.js":11,"../common/utils.js":12,"./css.js":3,"./event_emitter.js":7,"./html.js":8}],5:[function(require,module,exports){
"use strict";function Dropdown(t){var e,s,i,n=this;t=t||{},t.menu||_.error("menu is required"),_.isArray(t.datasets)||_.isObject(t.datasets)||_.error("1 or more datasets required"),t.datasets||_.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,e=_.bind(this._onSuggestionClick,this),s=_.bind(this._onSuggestionMouseEnter,this),i=_.bind(this._onSuggestionMouseLeave,this),this.$menu=DOM.element(t.menu).on("click.aa",".aa-suggestion",e).on("mouseenter.aa",".aa-suggestion",s).on("mouseleave.aa",".aa-suggestion",i),t.templates&&t.templates.header&&this.$menu.prepend(_.templatify(t.templates.header)),this.datasets=_.map(t.datasets,function(t){return initializeDataset(n.$menu,t)}),_.each(this.datasets,function(t){var e=t.getRoot();e&&0===e.parent().length&&n.$menu.append(e),t.onSync("rendered",n._onRendered,n)}),t.templates&&t.templates.footer&&this.$menu.append(_.templatify(t.templates.footer))}function initializeDataset(t,e){return new Dropdown.Dataset(_.mixin({$menu:t},e))}var _=require("../common/utils.js"),DOM=require("../common/dom.js"),EventEmitter=require("./event_emitter.js"),Dataset=require("./dataset.js"),css=require("./css.js");_.mixin(Dropdown.prototype,EventEmitter,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",DOM.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(DOM.element(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=_.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".aa-suggestion")},_getCursor:function(){return this.$menu.find(".aa-cursor").first()},_setCursor:function(t,e){t.first().addClass("aa-cursor"),e||this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("aa-cursor")},_moveCursor:function(t){var e,s,i,n;if(this.isOpen){if(s=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(s)+t,i=(i+1)%(e.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=e.length-1),this._setCursor(n=e.eq(i)),this._ensureVisible(n)}},_ensureVisible:function(t){var e,s,i,n;e=t.position().top,s=e+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),i=this.$menu.scrollTop(),n=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(i+e):s>n&&this.$menu.scrollTop(i+(s-n))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?css.ltr:css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:Dataset.extractDatum(t),value:Dataset.extractValue(t),datasetName:Dataset.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function e(e){e.update(t)}_.each(this.datasets,e)},empty:function(){function t(t){t.clear()}_.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".aa"),this.$menu=null,_.each(this.datasets,t)}}),Dropdown.Dataset=Dataset,module.exports=Dropdown;
},{"../common/dom.js":11,"../common/utils.js":12,"./css.js":3,"./dataset.js":4,"./event_emitter.js":7}],6:[function(require,module,exports){
"use strict";function EventBus(e){e&&e.el||_.error("EventBus initialized without el"),this.$el=DOM.element(e.el)}var namespace="autocomplete:",_=require("../common/utils.js"),DOM=require("../common/dom.js");_.mixin(EventBus.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(namespace+e,t)}}),module.exports=EventBus;
},{"../common/dom.js":11,"../common/utils.js":12}],7:[function(require,module,exports){
"use strict";function on(t,n,i,s){var c;if(!i)return this;for(n=n.split(splitter),i=s?bindContext(i,s):i,this._callbacks=this._callbacks||{};c=n.shift();)this._callbacks[c]=this._callbacks[c]||{sync:[],async:[]},this._callbacks[c][t].push(i);return this}function onAsync(t,n,i){return on.call(this,"async",t,n,i)}function onSync(t,n,i){return on.call(this,"sync",t,n,i)}function off(t){var n;if(!this._callbacks)return this;for(t=t.split(splitter);n=t.shift();)delete this._callbacks[n];return this}function trigger(t){var n,i,s,c,e;if(!this._callbacks)return this;for(t=t.split(splitter),s=[].slice.call(arguments,1);(n=t.shift())&&(i=this._callbacks[n]);)c=getFlush(i.sync,this,[n].concat(s)),e=getFlush(i.async,this,[n].concat(s)),c()&&nextTick(e);return this}function getFlush(t,n,i){function s(){for(var s,c=0,e=t.length;!s&&e>c;c+=1)s=t[c].apply(n,i)===!1;return!s}return s}function getNextTick(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function bindContext(t,n){return t.bind?t.bind(n):function(){t.apply(n,[].slice.call(arguments,0))}}var splitter=/\s+/,nextTick=getNextTick();module.exports={onSync:onSync,onAsync:onAsync,off:off,trigger:trigger};
},{}],8:[function(require,module,exports){
"use strict";module.exports={wrapper:'<span class="algolia-autocomplete"></span>',dropdown:'<span class="aa-dropdown-menu"></span>',dataset:'<div class="aa-dataset-%CLASS%"></div>',suggestions:'<span class="aa-suggestions"></span>',suggestion:'<div class="aa-suggestion"></div>'};
},{}],9:[function(require,module,exports){
"use strict";function Input(t){var e,i,n,r,s=this;t=t||{},t.input||_.error("input is missing"),e=_.bind(this._onBlur,this),i=_.bind(this._onFocus,this),n=_.bind(this._onKeydown,this),r=_.bind(this._onInput,this),this.$hint=DOM.element(t.hint),this.$input=DOM.element(t.input).on("blur.aa",e).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop),_.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(t){specialKeyCodeMap[t.which||t.keyCode]||_.defer(_.bind(s._onInput,s,t))}):this.$input.on("input.aa",r),this.query=this.$input.val(),this.$overflowHelper=buildOverflowHelper(this.$input)}function buildOverflowHelper(t){return DOM.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function areQueriesEquivalent(t,e){return Input.normalizeQuery(t)===Input.normalizeQuery(e)}function withModifier(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var specialKeyCodeMap;specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var _=require("../common/utils.js"),DOM=require("../common/dom.js"),EventEmitter=require("./event_emitter.js");Input.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},_.mixin(Input.prototype,EventEmitter,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=specialKeyCodeMap[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,r;switch(t){case"tab":n=this.getHint(),r=this.getInputValue(),i=n&&n!==r&&!withModifier(e);break;case"up":case"down":i=!withModifier(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!withModifier(e);break;default:i=!0}return i},_checkInputValue:function(){var t,e,i;t=this.getInputValue(),e=areQueriesEquivalent(t,this.query),i=e?this.query.length!==t.length:!1,this.query=t,e?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),n||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,i;return t=this.$input.val().length,e=this.$input[0].selectionStart,_.isNumber(e)?e===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),module.exports=Input;
},{"../common/dom.js":11,"../common/utils.js":12,"./event_emitter.js":7}],10:[function(require,module,exports){
"use strict";function Typeahead(t){var e,n,i;t=t||{},t.input||_.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.openOnFocus=!!t.openOnFocus,this.minLength=_.isNumber(t.minLength)?t.minLength:1,this.$node=buildDom(t),e=this.$node.find(".aa-dropdown-menu"),n=this.$node.find(".aa-input"),i=this.$node.find(".aa-hint"),n.on("blur.aa",function(t){var i=document.activeElement;_.isMsie()&&(e.is(i)||e.has(i).length>0)&&(t.preventDefault(),t.stopImmediatePropagation(),_.defer(function(){n.focus()}))}),e.on("mousedown.aa",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new EventBus({el:n}),this.dropdown=new Typeahead.Dropdown({menu:e,datasets:t.datasets,templates:t.templates}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new Typeahead.Input({input:n,hint:i}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function buildDom(t){var e,n,i,o;e=DOM.element(t.input),n=DOM.element(html.wrapper).css(css.wrapper),"block"===e.css("display")&&"table"===e.parent().css("display")&&n.css("display","table-cell"),i=DOM.element(html.dropdown).css(css.dropdown),t.templates&&t.templates.dropdownMenu&&i.html(_.templatify(t.templates.dropdownMenu)()),o=e.clone().css(css.hint).css(getBackgroundStyles(e)),o.val("").addClass("aa-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),o.removeData&&o.removeData(),e.data(attrsKey,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass("aa-input").attr({autocomplete:"off",spellcheck:!1}).css(t.hint?css.input:css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(s){}return e.wrap(n).parent().prepend(t.hint?o:null).append(i)}function getBackgroundStyles(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function destroyDomStructure(t){var e=t.find(".aa-input");_.each(e.data(attrsKey),function(t,n){void 0===t?e.removeAttr(n):e.attr(n,t)}),e.detach().removeClass("aa-input").insertAfter(t),e.removeData&&e.removeData(attrsKey),t.remove()}var attrsKey="aaAttrs",_=require("../common/utils.js"),DOM=require("../common/dom.js"),EventBus=require("./event_bus.js"),Input=require("./input.js"),Dropdown=require("./dropdown.js"),html=require("./html.js"),css=require("./css.js");_.mixin(Typeahead.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){if(this.isActivated=!0,this.openOnFocus){var t=this.input.getQuery();t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open()}},_onBlurred:function(){this.debug||(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close())},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,n,i,o,s;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(e=this.input.getInputValue(),n=Input.normalizeQuery(e),i=_.escapeRegExChars(n),o=new RegExp("^(?:"+i+")(.+$)","i"),s=o.exec(t.value),s?this.input.setHint(e+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,o;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),_.defer(_.bind(this.dropdown.empty,this.dropdown))},open:function(){if(!this.isActivated){var t=this.input.getInputValue();t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()}this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=_.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),destroyDomStructure(this.$node),this.$node=null}}),Typeahead.Dropdown=Dropdown,Typeahead.Input=Input,module.exports=Typeahead;
},{"../common/dom.js":11,"../common/utils.js":12,"./css.js":3,"./dropdown.js":5,"./event_bus.js":6,"./html.js":8,"./input.js":9}],11:[function(require,module,exports){
"use strict";module.exports={element:null};
},{}],12:[function(require,module,exports){
"use strict";var DOM=require("./dom.js");module.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},escapeRegExChars:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(n){return"number"==typeof n},toStr:function(n){return void 0===n||null===n?"":n+""},error:function(n){throw new Error(n)},every:function(n,t){var r=!0;return n?(this.each(n,function(e,u){return r=t.call(null,e,u,n),r?void 0:!1}),!!r):r},getUniqueId:function(){var n=0;return function(){return n++}}(),templatify:function(n){if(this.isFunction(n))return n;var t=DOM.element(n);return"SCRIPT"===t.prop("tagName")?function(){return t.text()}:function(){return String(n)}},defer:function(n){setTimeout(n,0)},noop:function(){}};
},{"./dom.js":11}]},{},[1]);
